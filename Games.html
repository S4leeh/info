<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>S4leeh | Minecraft Runner</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap" rel="stylesheet">

<style>
:root { --gold:#d4af37; --dirt:#553b23; --grass:#5da140; }
* { margin:0; padding:0; box-sizing:border-box; font-family:'Cairo',sans-serif; }
body {
    background:#121212;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    color:#fff;
}
#game-wrap {
    position:relative;
    width:95vw;
    max-width:1000px;
    height:400px;
    border:4px solid var(--gold);
    border-radius:15px;
    overflow:hidden;
    background:#87ceeb;
}
canvas { width:100%; height:100%; image-rendering:pixelated; }
.ui {
    position:absolute;
    top:10px;
    width:100%;
    padding:0 20px;
    display:flex;
    justify-content:space-between;
    z-index:10;
}
.box {
    background:rgba(0,0,0,.7);
    padding:8px 18px;
    border-radius:8px;
    border:2px solid var(--gold);
}
.overlay {
    position:absolute;
    inset:0;
    background:rgba(0,0,0,.85);
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    z-index:20;
}
button {
    background:var(--gold);
    color:#000;
    border:none;
    padding:12px 35px;
    font-size:20px;
    font-weight:900;
    border-radius:10px;
    cursor:pointer;
}
</style>
</head>
<body>

<div id="game-wrap">
<canvas id="game"></canvas>

<div class="ui">
    <div class="box" id="score">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</div>
    <div class="box" id="top" style="direction:ltr;">--</div>
</div>

<div class="overlay" id="start">
    <h1 style="color:var(--gold);margin-bottom:20px;">Ù…ØºØ§Ù…Ø±Ø© ØµØ§Ù„Ø­</h1>
    <button onclick="startGame()">Ø§Ø¨Ø¯Ø£</button>
</div>

<div class="overlay" id="over" style="display:none;">
    <h2 style="color:var(--gold);margin-bottom:15px;">Game Over ðŸ’€</h2>
    <p id="final"></p>
    <button onclick="restart()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
</div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = 1000; canvas.height = 400;

const GROUND = 300;
let speed = 3.2;
let frame = 0;
let score = 0;
let state = "START";

const highScores = JSON.parse(localStorage.getItem("s4leehTop3")) || [0,0,0];

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±
const load = src => { const i=new Image(); i.src=src; return i; };

const assets = {
    player: load("https://minotar.net/armor/body/Saleh/100.png"),
    Creeper: load("https://minotar.net/armor/body/Creeper/100.png"),
    Zombie: load("https://minotar.net/armor/body/Zombie/100.png"),
    Skeleton: load("https://minotar.net/armor/body/Skeleton/100.png"),
    Dirt: load("https://mc-heads.net/block/dirt"),
    Cobblestone: load("https://mc-heads.net/block/cobblestone"),
    Stone: load("https://mc-heads.net/block/stone"),
    Lava: load("https://mc-heads.net/block/lava_still"),
};

const skinNames = ["ISpitfire57","twpywq","Lonely","Abo7abs","S3eedxx"];

const player = {
    x:120, y:GROUND-110, w:80, h:110,
    dy:0, gravity:0.8, jump:-17, grounded:true
};

const obstacles = [];

function spawnObstacle() {
    const type = Math.random();
    let o = { x: canvas.width, passed:false };

    if (type < 0.4) {
        const mob = ["Creeper","Zombie","Skeleton"][Math.floor(Math.random()*3)];
        Object.assign(o,{ img:assets[mob], w:75,h:110,y:GROUND-110 });
    } 
    else if (type < 0.7) {
        const block = ["Dirt","Cobblestone","Stone","Lava"][Math.floor(Math.random()*4)];
        Object.assign(o,{ img:assets[block], w:50,h:50,y:GROUND-50 });
    } 
    else {
        const name = skinNames[Math.floor(Math.random()*skinNames.length)];
        o.img = load(`https://minotar.net/armor/body/${name}/100.png`);
        Object.assign(o,{ w:75,h:110,y:GROUND-110 });
    }

    obstacles.push(o);
}

function collide(a,b){
    return a.x+20 < b.x+b.w-20 &&
           a.x+a.w-20 > b.x+20 &&
           a.y+20 < b.y+b.h &&
           a.y+a.h > b.y+20;
}

function startGame(){
    document.getElementById("start").style.display="none";
    state="PLAY";
    loop();
}

function restart(){
    score=0; speed=3.2; frame=0;
    obstacles.length=0;
    player.y=GROUND-110; player.dy=0;
    document.getElementById("over").style.display="none";
    state="PLAY";
}

function loop(){
    if(state!=="PLAY") return;
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Ø£Ø±Ø¶ÙŠØ©
    ctx.fillStyle="#5da140"; ctx.fillRect(0,GROUND,canvas.width,5);
    ctx.fillStyle="#553b23"; ctx.fillRect(0,GROUND+5,canvas.width,95);

    // Ù„Ø§Ø¹Ø¨
    player.dy+=player.gravity;
    player.y+=player.dy;
    if(player.y>GROUND-110){ player.y=GROUND-110; player.dy=0; player.grounded=true; }
    ctx.drawImage(assets.player,player.x,player.y,player.w,player.h);

    if(frame%140===0) spawnObstacle();

    obstacles.forEach((o,i)=>{
        o.x-=speed;
        ctx.drawImage(o.img,o.x,o.y,o.w,o.h);

        if(collide(player,o)){
            state="OVER";
            document.getElementById("final").innerText=`Ø­Ù‚Ù‚Øª ${score} Ù†Ù‚Ø·Ø©`;
            document.getElementById("over").style.display="flex";
            highScores.push(score);
            highScores.sort((a,b)=>b-a);
            localStorage.setItem("s4leehTop3",JSON.stringify(highScores.slice(0,3)));
        }

        if(!o.passed && o.x+o.w<player.x){
            score+=14; o.passed=true;
            speed+=0.03;
            document.getElementById("score").innerText=`Ø§Ù„Ù†Ù‚Ø§Ø·: ${score}`;
        }
    });

    document.getElementById("top").innerText =
        highScores.slice(0,3).map((s,i)=>`#${i+1}: ${s}`).join(" | ");

    frame++;
    requestAnimationFrame(loop);
}

window.addEventListener("keydown",e=>{
    if(e.code==="Space" && player.grounded){
        player.dy=player.jump;
        player.grounded=false;
    }
});
</script>
</body>
</html>
