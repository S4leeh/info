<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Saleh â€“ Minecraft Runner</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
    body {
        margin: 0;
        background: #87ceeb;
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: hidden;
    }

    canvas {
        background: linear-gradient(#87ceeb, #6bbf59);
        border: 4px solid #000;
        image-rendering: pixelated;
    }

    .hud {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        color: #000;
        font-size: 16px;
        background: rgba(255,255,255,0.7);
        padding: 6px 12px;
        border-radius: 8px;
    }
</style>
</head>
<body>

<div class="hud" id="hud"></div>
<canvas id="game" width="900" height="300"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const GROUND = 230;
let speed = 6;
let gravity = 0.8;
let score = 0;
let gameOver = false;

const player = {
    x: 80,
    y: GROUND,
    w: 32,
    h: 48,
    vy: 0,
    jump() {
        if (this.y === GROUND) this.vy = -14;
    },
    update() {
        this.vy += gravity;
        this.y += this.vy;
        if (this.y > GROUND) {
            this.y = GROUND;
            this.vy = 0;
        }
    },
    draw() {
        ctx.fillStyle = "#4CAF50"; // Minecraft-style green
        ctx.fillRect(this.x, this.y - this.h, this.w, this.h);
        ctx.fillStyle = "#000";
        ctx.fillText("Saleh", this.x - 2, this.y - this.h - 4);
    }
};

const obstacleTypes = [
    { name: "Creeper", color: "#2ecc71", w: 30, h: 50 },
    { name: "Zombie", color: "#1abc9c", w: 30, h: 48 },
    { name: "Skeleton", color: "#ecf0f1", w: 28, h: 48, arrow: true },
    { name: "Dirt", color: "#8B4513", w: 32, h: 32 },
    { name: "Cobblestone", color: "#7f8c8d", w: 32, h: 32 },
    { name: "Stone", color: "#95a5a6", w: 32, h: 32 },
    { name: "Lava", color: "#e74c3c", w: 34, h: 20 }
];

const skinNames = [
    "ISpitfire57",
    "twpywq",
    "Lonely",
    "Abo7abs",
    "S3eedxx"
];

let obstacles = [];

function spawnObstacle() {
    let isSkin = Math.random() < 0.25;
    let type = isSkin
        ? { name: skinNames[Math.floor(Math.random()*skinNames.length)], color:"#9b59b6", w:30, h:48 }
        : obstacleTypes[Math.floor(Math.random()*obstacleTypes.length)];

    obstacles.push({
        x: canvas.width + 20,
        y: GROUND,
        ...type
    });
}

function collision(a, b) {
    return (
        a.x < b.x + b.w &&
        a.x + a.w > b.x &&
        a.y > b.y - b.h &&
        a.y - a.h < b.y
    );
}

function drawGround() {
    ctx.fillStyle = "#654321";
    ctx.fillRect(0, GROUND + 2, canvas.width, 60);
}

function updateScore() {
    document.getElementById("hud").innerHTML =
        `Score: ${score}<br>
        Top 3: ${getHighScores().join(" | ")}`;
}

function saveScore() {
    let scores = getHighScores();
    scores.push(score);
    scores.sort((a,b)=>b-a);
    scores = scores.slice(0,3);
    localStorage.setItem("mc_runner_scores", JSON.stringify(scores));
}

function getHighScores() {
    return JSON.parse(localStorage.getItem("mc_runner_scores")) || [0,0,0];
}

let spawnTimer = 0;

function loop() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    drawGround();
    player.update();
    player.draw();

    spawnTimer++;
    if (spawnTimer > 90) {
        spawnObstacle();
        spawnTimer = 0;
        speed += 0.05;
    }

    obstacles.forEach((o, i) => {
        o.x -= speed;
        ctx.fillStyle = o.color;
        ctx.fillRect(o.x, o.y - o.h, o.w, o.h);
        ctx.fillStyle = "#000";
        ctx.fillText(o.name, o.x - 4, o.y - o.h - 4);

        if (collision(player, o)) {
            gameOver = true;
        }

        if (o.x + o.w < 0) {
            obstacles.splice(i,1);
            score += 14;
        }
    });

    updateScore();

    if (!gameOver) {
        requestAnimationFrame(loop);
    } else {
        saveScore();
        ctx.fillStyle = "rgba(0,0,0,0.6)";
        ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = "#fff";
        ctx.font = "24px Arial";
        ctx.fillText("Game Over", 380, 140);
        ctx.font = "16px Arial";
        ctx.fillText("Press Space to Restart", 350, 170);
    }
}

document.addEventListener("keydown", e => {
    if (e.code === "Space") {
        if (gameOver) location.reload();
        else player.jump();
    }
});

loop();
</script>

</body>
</html>
