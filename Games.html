<!DOCTYPE html>
<html class="dark" lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<title>S4leeh | Ù…ØºØ§Ù…Ø±Ø© ØµØ§Ù„Ø­</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<script>
    tailwind.config = {
        darkMode: 'class',
        theme: {
            extend: {
                colors: { "primary": "#d4af35", "bg-dark": "#0a0a0a", "night": "#1a1a2e" },
                fontFamily: { "display": ["Cairo", "sans-serif"] },
                boxShadow: { 
                    "neon": "0 0 20px rgba(212, 175, 53, 0.4)",
                    "card": "0 8px 30px rgba(0,0,0,0.5)"
                }
            }
        }
    }
</script>
<style>
    body { background-color: #050505; color: white; overflow: hidden; touch-action: none; user-select: none; }
    
    /* Ø®Ù„ÙÙŠØ© Ø¨Ø±Ù…Ø¬ÙŠØ© (Ù…Ø¶Ù…ÙˆÙ†Ø© Ø§Ù„Ø¸Ù‡ÙˆØ±) */
    .digital-bg {
        position: absolute; inset: 0; z-index: 0;
        background: radial-gradient(circle at 50% 30%, #1a1a2e 0%, #000000 90%);
    }
    .grid-lines {
        position: absolute; inset: 0; opacity: 0.15;
        background-image: linear-gradient(rgba(212, 175, 53, 0.3) 1px, transparent 1px),
                          linear-gradient(90deg, rgba(212, 175, 53, 0.3) 1px, transparent 1px);
        background-size: 50px 50px;
        transform: perspective(1000px) rotateX(60deg) translateY(-100px) scale(3);
        transform-origin: center top;
        pointer-events: none;
    }

    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
    .glass-card {
        background: rgba(20, 20, 20, 0.6);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(212, 175, 53, 0.3);
        box-shadow: 0 10px 40px rgba(0,0,0,0.6);
        transition: transform 0.3s ease, border-color 0.3s;
    }
    .glass-card:hover { transform: translateY(-5px); border-color: #d4af35; }

    /* Ø²Ø± Ø«Ù„Ø§Ø«ÙŠ Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ */
    .btn-3d {
        transition: all 0.1s;
        box-shadow: 0px 8px 0px 0px #8f7216, 0px 20px 20px rgba(0,0,0,0.4);
        transform: translateY(0);
    }
    .btn-3d:active { transform: translateY(8px); box-shadow: 0px 0px 0px 0px #8f7216; }

    /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ù…Ù‡Ø§Ù… */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-thumb { background: #d4af35; border-radius: 10px; }
    ::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); }

    canvas { 
        image-rendering: pixelated; 
        border: 2px solid #d4af35; 
        box-shadow: 0 0 50px rgba(0,0,0,0.8);
        border-radius: 12px;
    }
</style>
</head>
<body class="font-display">

<div id="main-menu" class="relative z-10 w-full h-full flex flex-col items-center justify-between p-6">
    <div class="digital-bg"><div class="grid-lines"></div></div>

    <div class="relative z-20 w-full max-w-7xl flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
        
        <div class="glass-card rounded-2xl p-4 w-full md:w-64">
            <div class="flex items-center gap-2 mb-3 border-b border-white/10 pb-2">
                <span class="material-icons text-primary">emoji_events</span>
                <span class="text-sm font-bold text-gray-200">Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª</span>
            </div>
            <div id="top3-menu" class="space-y-2 text-sm font-bold" style="direction: ltr;">
                </div>
        </div>

        <div class="absolute left-1/2 top-0 -translate-x-1/2 hidden md:flex flex-col items-center pt-4">
            <div class="relative w-24 h-24 mb-2">
                <div class="absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"></div>
                <img src="logo.png" class="relative w-full h-full object-contain drop-shadow-lg transform hover:scale-110 transition duration-300">
            </div>
            <div class="bg-black/60 border border-primary/40 px-6 py-1 rounded-full backdrop-blur-md">
                <span class="text-primary font-black tracking-widest text-lg">S4LEEH</span>
            </div>
        </div>

        <div class="glass-card rounded-2xl p-4 w-full md:w-72 h-48 md:h-64 flex flex-col">
            <div class="flex items-center justify-between mb-3 border-b border-white/10 pb-2">
                <div class="flex items-center gap-2">
                    <span class="material-icons text-primary">assignment</span>
                    <span class="text-sm font-bold text-gray-200">Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…</span>
                </div>
                <span id="date-display" class="text-[10px] text-gray-500 font-mono"></span>
            </div>
            <div id="daily-quests-container" class="overflow-y-auto pr-1 space-y-2 flex-1">
                </div>
        </div>
    </div>

    <div class="md:hidden relative z-10 flex flex-col items-center mt-4">
        <img src="logo.png" class="w-32 h-32 object-contain drop-shadow-neon animate-pulse">
    </div>

    <div class="relative z-20 w-full flex flex-col items-center pb-8">
        <button onclick="switchToGame()" class="btn-3d group relative w-full max-w-md h-24 bg-primary hover:bg-[#eac448] rounded-2xl border-2 border-[#fceda8] flex flex-col items-center justify-center overflow-hidden transition-all">
            <span class="text-black font-black text-4xl drop-shadow-sm z-10">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø©</span>
            <span class="text-black/70 text-xs font-bold tracking-widest mt-1 z-10">Ø§Ø¶ØºØ· Ù„Ù„Ø§Ù†Ø·Ù„Ø§Ù‚ ğŸš€</span>
            
            <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent -translate-x-full group-hover:animate-[shine_1.5s_infinite]"></div>
        </button>
        <a href="index.html" class="mt-6 text-gray-500 hover:text-primary transition font-bold text-sm">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    </div>
</div>

<div id="game-interface" class="hidden fixed inset-0 z-50 bg-[#0a0a0a] flex-col items-center justify-center">
    <div class="absolute top-0 w-full max-w-5xl p-4 flex justify-between items-center z-50">
        <div class="bg-black/70 border border-primary/50 px-5 py-2 rounded-xl backdrop-blur-md">
            <span class="text-gray-400 text-xs font-bold block">Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø­Ø§Ù„ÙŠØ©</span>
            <span id="game-score" class="text-2xl font-black text-primary font-mono">0</span>
        </div>
        
        <button onclick="exitGame()" class="bg-red-500/10 hover:bg-red-600 border border-red-500/50 text-red-500 hover:text-white w-12 h-12 rounded-xl flex items-center justify-center transition duration-200">
            <span class="material-icons text-2xl">close</span>
        </button>
    </div>

    <canvas id="gameCanvas" width="850" height="420" class="max-w-[95vw] max-h-[65vh]"></canvas>

    <div id="msg-overlay" class="hidden absolute inset-0 bg-black/90 z-[60] flex-col items-center justify-center text-center p-6 backdrop-blur-sm">
        <h2 class="text-5xl font-black text-primary mb-2 drop-shadow-neon">Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!</h2>
        <div class="text-2xl text-white font-bold mb-6">Ù†Ù‚Ø§Ø·Ùƒ: <span id="final-score" class="text-primary font-mono">0</span></div>
        
        <div id="death-reason" class="bg-red-900/40 border border-red-500/30 text-red-300 px-6 py-2 rounded-full mb-10 font-bold text-lg">
            </div>
        
        <div class="flex flex-col md:flex-row gap-4 w-full max-w-md">
            <button onclick="resetGame()" class="btn-3d flex-1 bg-primary text-black font-black py-4 rounded-xl text-xl hover:brightness-110">Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</button>
            <button onclick="exitGame()" class="flex-1 bg-gray-800 border-2 border-gray-600 text-gray-300 font-bold py-4 rounded-xl hover:bg-gray-700 transition">Ø®Ø±ÙˆØ¬ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
        </div>
    </div>
</div>

<script>
    tailwind.config.theme.extend.keyframes = {
        shine: { '0%': { transform: 'translateX(-100%)' }, '100%': { transform: 'translateX(100%)' } }
    }
</script>

<script>
/* ================== Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ù…Ù‡Ø§Ù… ================== */
const highScores = JSON.parse(localStorage.getItem("s4leehTop3")) || [0, 0, 0];

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØ©
function updateMenuHighScores() {
    const container = document.getElementById('top3-menu');
    container.innerHTML = `
        <div class="flex justify-between items-center bg-white/5 p-2 rounded-lg border border-white/5">
            <div class="flex items-center gap-2"><span class="material-icons text-yellow-400 text-xs">emoji_events</span> <span class="text-yellow-400 font-black">#1</span></div>
            <span class="font-mono text-white text-lg">${highScores[0]}</span>
        </div>
        <div class="flex justify-between items-center px-2 py-1">
            <span class="text-gray-400 font-bold text-xs">#2</span> <span class="font-mono text-gray-300">${highScores[1]}</span>
        </div>
        <div class="flex justify-between items-center px-2 py-1">
            <span class="text-orange-700 font-bold text-xs">#3</span> <span class="font-mono text-gray-400">${highScores[2]}</span>
        </div>
    `;
}
updateMenuHighScores();

// ØªÙˆÙ„ÙŠØ¯ Ù…Ù‡Ø§Ù… ÙŠÙˆÙ…ÙŠØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© ÙˆÙ…ØªØ¬Ø¯Ø¯Ø©
function generateDailyQuests() {
    const allQuests = [
        "Ø§Ù‚ÙØ² 50 Ù…Ø±Ø©", "Ø§Ø¬Ù…Ø¹ 1000 Ù†Ù‚Ø·Ø©", "ØªØ¬Ù†Ø¨ Ø§Ù„ÙƒØ±ÙŠØ¨Ø± 3 Ù…Ø±Ø§Øª", 
        "Ø§Ù„Ø¹Ø¨ 5 Ù…Ø­Ø§ÙˆÙ„Ø§Øª", "ÙˆØµÙ„ Ø³ÙƒÙˆØ± 500 Ø¨Ø¯ÙˆÙ† Ø¶Ø±Ø±", "Ù„Ø§ ØªÙ…ÙˆØª Ù…Ù† Ø§Ù„Ù„Ø§ÙØ§",
        "ØªØ¬Ø§ÙˆØ² Ø³ÙƒÙŠÙ† Ø³Ø¹ÙŠØ¯", "Ø§Ù‡Ø²Ù… Ø§Ù„Ø²ÙˆÙ…Ø¨ÙŠ", "Ø§Ù„Ø¹Ø¨ ÙÙŠ Ø§Ù„Ù„ÙŠÙ„", 
        "Ø­Ù‚Ù‚ Ø±Ù‚Ù… Ù‚ÙŠØ§Ø³ÙŠ Ø¬Ø¯ÙŠØ¯", "Ø§Ù‚ÙØ² ÙÙˆÙ‚ 10 Ø­ÙˆØ§Ø¬Ø²", "Ø§Ø¨Ù‚Ù‰ Ø­ÙŠØ§Ù‹ Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ†"
    ];
    
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ§Ø±ÙŠØ® ÙƒÙ€ Seed Ø¹Ø´ÙˆØ§Ø¦ÙŠ
    const date = new Date();
    document.getElementById('date-display').innerText = date.toLocaleDateString('en-GB');
    const seed = date.getFullYear() * 10000 + (date.getMonth() + 1) * 100 + date.getDate();
    
    // Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø§Ø®ØªÙŠØ§Ø± 5 Ù…Ù‡Ø§Ù… Ù„Ù„ÙŠÙˆÙ…
    let dailyIndices = [];
    let tempSeed = seed;
    while(dailyIndices.length < 5) {
        let val = Math.floor((tempSeed * 9301 + 49297) % 233280) % allQuests.length;
        if(!dailyIndices.includes(val)) dailyIndices.push(val);
        tempSeed++;
    }

    const container = document.getElementById('daily-quests-container');
    container.innerHTML = dailyIndices.map(i => `
        <div class="flex justify-between items-center p-2 bg-white/5 rounded-lg border border-white/5 hover:bg-white/10 transition group">
            <span class="text-xs text-gray-300 group-hover:text-primary transition">${allQuests[i]}</span>
            <div class="w-3 h-3 rounded-full border border-gray-600"></div>
        </div>
    `).join('');
}
generateDailyQuests();

/* ================== Ù…Ù†Ø·Ù‚ Ø§Ù„Ù„Ø¹Ø¨Ø© ================== */
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d", { alpha: false });
ctx.imageSmoothingEnabled = false;

const GROUND = 340;
let gameState = "MENU"; 
let score = 0, speed = 5.5, frame = 0, nextSpawnFrame = 100;
const player = { x:80, y:GROUND-100, w:75, h:100, vy:0, jump:false };
let obstacles = [];

// Ø§Ù„Ø£ØµÙˆÙ„
const assets = {};
const toLoad = [
    { n: "Saleh", u: "https://minotar.net/armor/body/Saleh/100.png" },
    { n: "Creeper", u: "https://minotar.net/armor/body/Creeper/100.png" },
    { n: "Zombie", u: "https://minotar.net/armor/body/Zombie/100.png" },
    { n: "Dirt", u: "https://static.wikia.nocookie.net/minecraft_gamepedia/images/2/2f/Dirt.png" },
    { n: "Lava", u: "https://static.wikia.nocookie.net/minecraft_gamepedia/images/3/30/Lava.png" },
    { n: "Stone", u: "https://static.wikia.nocookie.net/minecraft_gamepedia/images/1/1d/Stone.png" },
    { n: "Cobblestone", u: "https://static.wikia.nocookie.net/minecraft_gamepedia/images/3/3c/Cobblestone.png" }
];
const skins = ["ISpitfire57","twpywq","Lonely","Abo7abs","S3eedxx","IRimona","7og9_"];

let loadedCount = 0;
toLoad.forEach(item => {
    const img = new Image();
    img.crossOrigin = "anonymous";
    img.src = item.u;
    img.onload = () => loadedCount++;
    assets[item.n] = img;
});

// Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­ÙƒÙ…
function switchToGame() {
    if(loadedCount < toLoad.length) return alert("Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...");
    document.getElementById('main-menu').style.display = 'none';
    document.getElementById('game-interface').style.display = 'flex';
    resetGame();
}

function exitGame() {
    gameState = "MENU";
    document.getElementById('game-interface').style.display = 'none';
    document.getElementById('main-menu').style.display = 'flex';
    updateMenuHighScores();
}

function resetGame() {
    score = 0; speed = 5.5; frame = 0; obstacles = [];
    player.y = GROUND - player.h; player.vy = 0; player.jump = false;
    nextSpawnFrame = 80;
    document.getElementById('msg-overlay').classList.add('hidden');
    document.getElementById('msg-overlay').classList.remove('flex');
    gameState = "PLAY";
    requestAnimationFrame(loop);
}

// Ø§Ù„Ù‚ÙØ²
function doJump() {
    if(!player.jump && gameState === "PLAY") {
        player.vy = -18.5; player.jump = true;
    }
}

document.addEventListener("keydown", e => { if(e.code === "Space" && gameState === "PLAY") doJump(); });
window.addEventListener("touchstart", e => { 
    if (gameState === "PLAY" && e.target.tagName !== 'BUTTON') { e.preventDefault(); doJump(); }
}, {passive: false});

// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚
function spawn() {
    const rand = Math.random();
    let o = { x: canvas.width + 120, passed: false, name: "" };

    if(rand < 0.35) { 
        const m = Math.random() > 0.5 ? "Creeper" : "Zombie";
        Object.assign(o, { img: assets[m], w: 75, h: 105, y: GROUND-105, name: m });
    } else if(rand < 0.70) { 
        const blocks = ["Dirt", "Lava", "Stone", "Cobblestone"];
        const b = blocks[Math.floor(Math.random() * blocks.length)];
        Object.assign(o, { img: assets[b], w: 60, h: 60, y: GROUND-60, name: b });
    } else { 
        const s = skins[Math.floor(Math.random()*skins.length)];
        const skinImg = new Image();
        skinImg.crossOrigin = "anonymous";
        skinImg.src = `https://minotar.net/armor/body/${s}/100.png`;
        Object.assign(o, { img: skinImg, w: 75, h: 105, y: GROUND-105, name: s });
    }
    
    obstacles.push(o);
    // Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ø¢Ù…Ù†Ø©
    const minSafeGap = 55; 
    const randomExtraGap = Math.floor(Math.random() * 85); 
    nextSpawnFrame = frame + minSafeGap + randomExtraGap;
}

// Ø­Ù„Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
function loop() {
    if(gameState !== "PLAY") return;
    frame++;
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Ù„ÙŠÙ„
    ctx.fillStyle = "#1a1a2e"; ctx.fillRect(0, 0, canvas.width, canvas.height);
    // Ù†Ø¬ÙˆÙ…
    ctx.fillStyle = "white";
    if (frame % 2 === 0) { ctx.fillRect(100, 50, 2, 2); ctx.fillRect(500, 40, 2, 2); }
    // Ù‚Ù…Ø±
    ctx.fillStyle = "#f5f5f5"; ctx.beginPath(); ctx.arc(750, 60, 25, 0, Math.PI * 2); ctx.fill();

    // Ø£Ø±Ø¶ÙŠØ©
    ctx.fillStyle = "#2d1d0f"; ctx.fillRect(0, GROUND, canvas.width, canvas.height-GROUND);
    ctx.fillStyle = "#2a4d1a"; ctx.fillRect(0, GROUND, canvas.width, 12);

    // Ø§Ù„Ù„Ø§Ø¹Ø¨
    player.vy += 0.85; player.y += player.vy;
    if(player.y >= GROUND-player.h) { player.y = GROUND-player.h; player.vy = 0; player.jump = false; }
    
    // ØªÙˆÙ‡Ø¬
    ctx.shadowBlur = 15; ctx.shadowColor = "rgba(212, 175, 55, 0.4)";
    if(assets["Saleh"]) ctx.drawImage(assets["Saleh"], player.x, player.y, player.w, player.h);
    ctx.shadowBlur = 0;

    if(frame >= nextSpawnFrame) spawn();

    // Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚
    for(let i = obstacles.length - 1; i >= 0; i--) {
        let o = obstacles[i];
        o.x -= speed;
        if(o.img) ctx.drawImage(o.img, o.x, o.y, o.w, o.h);

        if(!o.passed && o.x + o.w < player.x) { 
            score += 14; o.passed = true; speed += 0.05; 
        }
        
        // ØªØµØ§Ø¯Ù…
        if(player.x+25 < o.x+o.w-25 && player.x+player.w-25 > o.x+25 && 
           player.y+15 < o.y+o.h-10 && player.y+player.h-10 > o.y+15) {
            gameOver(o.name);
            return;
        }
        if(o.x < -150) obstacles.splice(i, 1);
    }

    document.getElementById("game-score").innerText = score;
    requestAnimationFrame(loop);
}

function gameOver(killerName) {
    gameState = "OVER";
    const overlay = document.getElementById("msg-overlay");
    overlay.classList.remove('hidden');
    overlay.classList.add('flex');
    
    document.getElementById("final-score").innerText = score;
    document.getElementById("death-reason").innerText = "Ø³Ø¨Ø¨ Ø§Ù„Ø³Ù‚ÙˆØ·: " + killerName;
    
    highScores.push(score); highScores.sort((a,b)=>b-a); highScores = highScores.slice(0,3);
    localStorage.setItem("s4leehTop3", JSON.stringify(highScores));
}
</script>
</body>
</html>
