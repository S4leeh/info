<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>S4leeh Minecraft Runner</title>

<style>
html,body{
  margin:0;
  padding:0;
  background:#111;
  font-family:Arial, sans-serif;
}
canvas{
  display:block;
  margin:20px auto;
  background:#87CEEB;
  border:6px solid #d4af37;
  border-radius:20px;
}
.ui{
  position:absolute;
  color:#fff;
  background:#222;
  padding:8px 14px;
  border-radius:10px;
  border:2px solid #d4af37;
  font-weight:bold;
}
#score{top:20px;right:30px;}
#top3{top:20px;left:30px;}
#over{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.7);
}
#over div{
  background:#222;
  padding:30px;
  border-radius:20px;
  border:3px solid #d4af37;
  color:#fff;
  text-align:center;
}
</style>
</head>

<body>

<div id="score" class="ui">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</div>
<div id="top3" class="ui">#1: 0 | #2: 0 | #3: 0</div>

<canvas id="game" width="1100" height="450"></canvas>

<div id="over">
  <div>
    <h2>ðŸ’€ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©</h2>
    <p id="final"></p>
    <button onclick="restart()">Ø¥Ø¹Ø§Ø¯Ø©</button>
  </div>
</div>

<script>
/* ========= Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ========= */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const GROUND = 360;
let state = "PLAY";
let frame = 0;
let speed = 3.2; // Ø³Ø±Ø¹Ø© Ø®ÙÙŠÙØ©
let score = 0;
let safeTime = 60;

const skinNames = ["ISpitfire57","twpywq","Lonely","Abo7abs","S3eedxx"];
let obstacles = [];

let highScores = JSON.parse(localStorage.getItem("s4leehTop3")) || [0,0,0];

/* ========= Ø§Ù„Ù„Ø§Ø¹Ø¨ ========= */
const player = {
  x:120,
  y:GROUND-110,
  w:80,
  h:110,
  vy:0,
  jump:false,
  img:new Image()
};
player.img.src = "https://minotar.net/armor/body/Saleh/100.png";

/* ========= Ø§Ù„ØµÙˆØ± ========= */
const assets = {};
function load(name,url){
  assets[name]=new Image();
  assets[name].src=url;
}
load("Creeper","https://minotar.net/armor/body/Creeper/100.png");
load("Zombie","https://minotar.net/armor/body/Zombie/100.png");
load("Skeleton","https://minotar.net/armor/body/Skeleton/100.png");
load("Dirt","https://static.wikia.nocookie.net/minecraft_gamepedia/images/2/2f/Dirt.png");
load("Cobblestone","https://static.wikia.nocookie.net/minecraft_gamepedia/images/3/3c/Cobblestone.png");
load("Stone","https://static.wikia.nocookie.net/minecraft_gamepedia/images/1/1d/Stone.png");
load("Lava","https://static.wikia.nocookie.net/minecraft_gamepedia/images/3/30/Lava.png");

/* ========= Ø§Ù„ØªØ­ÙƒÙ… ========= */
document.addEventListener("keydown",e=>{
  if(e.code==="Space" && !player.jump && state==="PLAY"){
    player.vy=-19;
    player.jump=true;
  }
});

/* ========= Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚ ========= */
function spawnObstacle(){
  let o={x:canvas.width+200,passed:false};
  const t=Math.random();

  if(t<0.4){
    const m=["Creeper","Zombie","Skeleton"][Math.floor(Math.random()*3)];
    Object.assign(o,{img:assets[m],w:80,h:110,y:GROUND-110});
  }else if(t<0.7){
    const b=["Dirt","Cobblestone","Stone","Lava"][Math.floor(Math.random()*4)];
    Object.assign(o,{img:assets[b],w:50,h:50,y:GROUND-50});
  }else{
    const n=skinNames[Math.floor(Math.random()*skinNames.length)];
    o.img=new Image();
    o.img.src=`https://minotar.net/armor/body/${n}/100.png`;
    Object.assign(o,{w:80,h:110,y:GROUND-110});
  }
  obstacles.push(o);
}

/* ========= ØªØµØ§Ø¯Ù… ========= */
function collide(a,b){
  return a.x<b.x+b.w &&
         a.x+a.w>b.x &&
         a.y<b.y+b.h &&
         a.y+a.h>b.y;
}

/* ========= Ø§Ù„Ø­Ù„Ù‚Ø© ========= */
function loop(){
  if(state!=="PLAY")return;
  frame++;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Ø£Ø±Ø¶ÙŠØ©
  ctx.fillStyle="#5b3a1d";
  ctx.fillRect(0,GROUND,canvas.width,canvas.height-GROUND);

  // Ù„Ø§Ø¹Ø¨
  player.vy+=0.42;
  player.y+=player.vy;
  if(player.y>=GROUND-player.h){
    player.y=GROUND-player.h;
    player.vy=0;
    player.jump=false;
  }
  ctx.drawImage(player.img,player.x,player.y,player.w,player.h);

  // Ø¹ÙˆØ§Ø¦Ù‚
  if(frame%140===0)spawnObstacle();

  obstacles.forEach(o=>{
    o.x-=speed;
    ctx.drawImage(o.img,o.x,o.y,o.w,o.h);

    if(!o.passed && o.x+o.w<player.x){
      score+=14;
      o.passed=true;
    }

    if(safeTime<=0 && collide(player,o)){
      gameOver();
    }
  });

  obstacles=obstacles.filter(o=>o.x>-100);
  if(safeTime>0)safeTime--;

  document.getElementById("score").innerText="Ø§Ù„Ù†Ù‚Ø§Ø·: "+score;
  document.getElementById("top3").innerText=
    `#1: ${highScores[0]} | #2: ${highScores[1]} | #3: ${highScores[2]}`;

  requestAnimationFrame(loop);
}

/* ========= Ù†Ù‡Ø§ÙŠØ© ========= */
function gameOver(){
  state="OVER";
  document.getElementById("over").style.display="flex";
  document.getElementById("final").innerText=`Ø­Ù‚Ù‚Øª ${score} Ù†Ù‚Ø·Ø©`;
  highScores.push(score);
  highScores.sort((a,b)=>b-a);
  highScores=highScores.slice(0,3);
  localStorage.setItem("s4leehTop3",JSON.stringify(highScores));
}

function restart(){
  location.reload();
}

loop();
</script>

</body>
</html>
